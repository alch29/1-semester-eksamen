<form method="post" action="/register" class="gap">   
    <h1 class="headline">Register new user</h1>

    <input class="activeInputField" type="text" name="name" placeholder="Full name" required>
    <input class="activeInputField" type="email" name="email" placeholder="Email" required>
    <input class="activeInputField" type="password" name="password" placeholder="Password" required>   

    <h3>Security Question</h3>
    <p>Select a question for account recovery:</p>
    
    <select name="question_id" id="securityQuestion" class="activeInputField" required>
      <option value="">-- Select a security question --</option>
    </select>
    
    <input class="activeInputField" type="text" name="question_answer" placeholder="Your answer" required>

    {{#if error}}
      <div class="error-message" style="color: red; margin-bottom: 10px;">{{error}}</div>
    {{/if}}
    <button type="submit" class="button2">Register</button>

    <a href="/" class="button1">Cancel</a>

</form>

<script>
  async function loadQuestions() {
    try {
      const response = await fetch('/api/questions');
      const questions = await response.json();
      
      const select = document.getElementById('securityQuestion');
      questions.forEach(q => {
        const option = document.createElement('option');
        option.value = q.id;
        option.textContent = q.question_text;
        select.appendChild(option);
      });
    } catch (error) {
      console.error('Error loading questions:', error);
    }
  }

  loadQuestions();
</script>